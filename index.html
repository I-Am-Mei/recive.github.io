<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Supabase Login Canvas</title>
</head>
<body>
  <canvas id="loginCanvas" width="400" height="300" style="border:1px solid #000000;"></canvas>

  <script>
    const canvas = document.getElementById('loginCanvas');
    const ctx = canvas.getContext('2d');

    // Draw form labels
    ctx.font = '16px Arial';
    ctx.fillText('Username:', 50, 50);
    ctx.fillText('Password:', 50, 100);

    // Supabase config
    const supabaseUrl = 'https://lrmfhusbakkgpjjdjdvg.supabase.co';
    const supabaseAnonKey = 'YOUR_ANON_KEY_HERE';

    // Function to simulate login
    async function login(username, password) {
      const query = `${supabaseUrl}/rest/v1/user?username=eq."${username}"&password=eq."${password}"&select=id,username,role&limit=1`;

      try {
        const response = await fetch(query, {
          headers: {
            apikey: supabaseAnonKey,
            Authorization: `Bearer ${supabaseAnonKey}`
          }
        });
        const data = await response.json();
        return data;
      } catch (err) {
        console.error(err);
        return [];
      }
    }

    // Example login attempt (username and password both '1')
    login('1', '1').then(data => {
      if (data.length > 0) {
        ctx.fillStyle = 'green';
        ctx.fillText(`Welcome ${data[0].username}! Role: ${data[0].role}`, 50, 200);
      } else {
        ctx.fillStyle = 'red';
        ctx.fillText('Invalid username or password.', 50, 200);
      }
    });
  </script>
</body>
</html>

