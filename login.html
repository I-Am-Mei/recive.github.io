<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard</title>
</head>
<body>
<h1>Welcome to the Dashboard</h1>
<p id="userInfo"></p>
<p id="message"></p>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const supabaseUrl = 'https://lrmfhusbakkgpjjdjdvg.supabase.co';
const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxybWZodXNiYWtrZ3BqamRqZHZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyOTQzNTUsImV4cCI6MjA3MDg3MDM1NX0.bY9ILZaTNELGjRvu7ovcKA2moqnOhAb_8oN2QhIigPg';
const supabase = supabase.createClient(supabaseUrl, supabaseKey);

async function checkAuth() {
    const { data: { session } } = await supabase.auth.getSession();

    if(!session){
        // Not logged in, redirect to login page
        window.location.href = 'login.html';
        return;
    }

    // User is logged in
    const user = session.user;
    document.getElementById('userInfo').textContent = `Logged in as: ${user.email}`;
}

// Optional: auto-login after signup (for first-time users)
async function loginAfterSignup(email, password) {
    const { data, error } = await supabase.auth.signInWithPassword({ email, password });
    if (error) {
        document.getElementById('message').textContent = 'Login failed: ' + error.message;
    } else {
        window.location.href = 'dashboard.html';
    }
}

// Call on page load
checkAuth();
</script>
</body>
</html>
